{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/SEBASTIEN/Desktop/Exercices Web/React/Projets/Snapchat/snapchat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Avatar}from\"@material-ui/core\";import React,{useEffect,useState}from\"react\";import\"./Chats.css\";import SearchIcon from\"@material-ui/icons/Search\";import ChatBubbleIcon from\"@material-ui/icons/ChatBubble\";import{auth,db}from\"./firebase\";import Chat from\"./Chat\";import{useSelector,useDispatch}from\"react-redux\";import{selectUser}from\"./features/appSlice\";import{useHistory}from\"react-router-dom\";import RadioButtonUncheckedIcon from\"@material-ui/icons/RadioButtonUnchecked\";import{resetCameraImage}from\"./features/cameraSlice\";function Chats(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var user=useSelector(selectUser);var dispatch=useDispatch();var history=useHistory();var takeSnap=function takeSnap(){dispatch(resetCameraImage());history.push(\"/\");};useEffect(function(){db.collection(\"posts\").orderBy(\"timestamp\",\"desc\").onSnapshot(function(snapshot){return setPosts(snapshot.docs.map(function(doc){return{id:doc.id,data:doc.data()};}));});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chats__header\",children:[/*#__PURE__*/_jsx(Avatar,{src:user.profilePic,onClick:function onClick(){auth.signOut();},className:\"chats__avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chats__search\",children:[/*#__PURE__*/_jsx(SearchIcon,{className:\"chats__searchIcon\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"friends\",type:\"text\"})]}),/*#__PURE__*/_jsx(ChatBubbleIcon,{className:\"chats__chatIcon\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chats__posts\",children:posts.map(function(_ref){var id=_ref.id,_ref$data=_ref.data,profilePic=_ref$data.profilePic,username=_ref$data.username,timestamp=_ref$data.timestamp,imageUrl=_ref$data.imageUrl,read=_ref$data.read;return/*#__PURE__*/_jsx(Chat,{profilePic:profilePic,username:username,timestamp:timestamp,imageUrl:imageUrl,read:read,id:id},id);})}),/*#__PURE__*/_jsx(RadioButtonUncheckedIcon,{className:\"chats__takePicIcon\",onClick:takeSnap,fontSize:\"large\"})]});}export default Chats;","map":{"version":3,"sources":["C:/Users/SEBASTIEN/Desktop/Exercices Web/React/Projets/Snapchat/snapchat/src/Chats.js"],"names":["Avatar","React","useEffect","useState","SearchIcon","ChatBubbleIcon","auth","db","Chat","useSelector","useDispatch","selectUser","useHistory","RadioButtonUncheckedIcon","resetCameraImage","Chats","posts","setPosts","user","dispatch","history","takeSnap","push","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","data","profilePic","signOut","username","timestamp","imageUrl","read"],"mappings":"uRAAA,OAASA,MAAT,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,UAAP,KAAuB,2BAAvB,CACA,MAAOC,CAAAA,cAAP,KAA2B,+BAA3B,CACA,OAASC,IAAT,CAAeC,EAAf,KAAyB,YAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,KAA2B,qBAA3B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,wBAAP,KAAqC,yCAArC,CACA,OAASC,gBAAT,KAAiC,wBAAjC,CAEA,QAASC,CAAAA,KAAT,EAAiB,eACWZ,QAAQ,CAAC,EAAD,CADnB,wCACRa,KADQ,eACDC,QADC,eAEf,GAAMC,CAAAA,IAAI,CAAGT,WAAW,CAACE,UAAD,CAAxB,CACA,GAAMQ,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAEA,GAAMS,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrBF,QAAQ,CAACL,gBAAgB,EAAjB,CAAR,CACAM,OAAO,CAACE,IAAR,CAAa,GAAb,EACD,CAHD,CAKApB,SAAS,CAAC,UAAM,CACdK,EAAE,CAACgB,UAAH,CAAc,OAAd,EACGC,OADH,CACW,WADX,CACwB,MADxB,EAEGC,UAFH,CAEc,SAACC,QAAD,QACVT,CAAAA,QAAQ,CACNS,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACC,GAAD,QAAU,CAC1BC,EAAE,CAAED,GAAG,CAACC,EADkB,CAE1BC,IAAI,CAAEF,GAAG,CAACE,IAAJ,EAFoB,CAAV,EAAlB,CADM,CADE,EAFd,EAUD,CAXQ,CAWN,EAXM,CAAT,CAaA,mBACE,aAAK,SAAS,CAAC,OAAf,wBACE,aAAK,SAAS,CAAC,eAAf,wBACE,KAAC,MAAD,EACE,GAAG,CAAEb,IAAI,CAACc,UADZ,CAEE,OAAO,CAAE,kBAAM,CACb1B,IAAI,CAAC2B,OAAL,GACD,CAJH,CAKE,SAAS,CAAC,eALZ,EADF,cAQE,aAAK,SAAS,CAAC,eAAf,wBACE,KAAC,UAAD,EAAY,SAAS,CAAC,mBAAtB,EADF,cAEE,cAAO,WAAW,CAAC,SAAnB,CAA6B,IAAI,CAAC,MAAlC,EAFF,GARF,cAYE,KAAC,cAAD,EAAgB,SAAS,CAAC,iBAA1B,EAZF,GADF,cAgBE,YAAK,SAAS,CAAC,cAAf,UACGjB,KAAK,CAACY,GAAN,CACC,kBACEE,CAAAA,EADF,MACEA,EADF,gBAEEC,IAFF,CAEUC,UAFV,WAEUA,UAFV,CAEsBE,QAFtB,WAEsBA,QAFtB,CAEgCC,SAFhC,WAEgCA,SAFhC,CAE2CC,QAF3C,WAE2CA,QAF3C,CAEqDC,IAFrD,WAEqDA,IAFrD,oBAIE,KAAC,IAAD,EAEE,UAAU,CAAEL,UAFd,CAGE,QAAQ,CAAEE,QAHZ,CAIE,SAAS,CAAEC,SAJb,CAKE,QAAQ,CAAEC,QALZ,CAME,IAAI,CAAEC,IANR,CAOE,EAAE,CAAEP,EAPN,EACOA,EADP,CAJF,EADD,CADH,EAhBF,cAkCE,KAAC,wBAAD,EACE,SAAS,CAAC,oBADZ,CAEE,OAAO,CAAET,QAFX,CAGE,QAAQ,CAAC,OAHX,EAlCF,GADF,CA0CD,CAED,cAAeN,CAAAA,KAAf","sourcesContent":["import { Avatar } from \"@material-ui/core\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport \"./Chats.css\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport ChatBubbleIcon from \"@material-ui/icons/ChatBubble\";\r\nimport { auth, db } from \"./firebase\";\r\nimport Chat from \"./Chat\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectUser } from \"./features/appSlice\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport RadioButtonUncheckedIcon from \"@material-ui/icons/RadioButtonUnchecked\";\r\nimport { resetCameraImage } from \"./features/cameraSlice\";\r\n\r\nfunction Chats() {\r\n  const [posts, setPosts] = useState([]);\r\n  const user = useSelector(selectUser);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const takeSnap = () => {\r\n    dispatch(resetCameraImage());\r\n    history.push(\"/\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    db.collection(\"posts\")\r\n      .orderBy(\"timestamp\", \"desc\")\r\n      .onSnapshot((snapshot) =>\r\n        setPosts(\r\n          snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            data: doc.data(),\r\n          }))\r\n        )\r\n      );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"chats\">\r\n      <div className=\"chats__header\">\r\n        <Avatar\r\n          src={user.profilePic}\r\n          onClick={() => {\r\n            auth.signOut();\r\n          }}\r\n          className=\"chats__avatar\"\r\n        />\r\n        <div className=\"chats__search\">\r\n          <SearchIcon className=\"chats__searchIcon\" />\r\n          <input placeholder=\"friends\" type=\"text\" />\r\n        </div>\r\n        <ChatBubbleIcon className=\"chats__chatIcon\" />\r\n      </div>\r\n\r\n      <div className=\"chats__posts\">\r\n        {posts.map(\r\n          ({\r\n            id,\r\n            data: { profilePic, username, timestamp, imageUrl, read },\r\n          }) => (\r\n            <Chat\r\n              key={id}\r\n              profilePic={profilePic}\r\n              username={username}\r\n              timestamp={timestamp}\r\n              imageUrl={imageUrl}\r\n              read={read}\r\n              id={id}\r\n            />\r\n          )\r\n        )}\r\n      </div>\r\n      <RadioButtonUncheckedIcon\r\n        className=\"chats__takePicIcon\"\r\n        onClick={takeSnap}\r\n        fontSize=\"large\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chats;\r\n"]},"metadata":{},"sourceType":"module"}