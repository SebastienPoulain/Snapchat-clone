{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"C:/Users/SEBASTIEN/Desktop/Exercices Web/React/Projets/Snapchat/snapchat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{Avatar}from\"@material-ui/core\";import React from\"react\";import\"./Chat.css\";import StopRoundedIcon from\"@material-ui/icons/StopRounded\";import Moment from\"react-moment\";import\"moment/locale/fr\";import{selectImage,selectUser}from\"./features/appSlice\";import{useDispatch,useSelector}from\"react-redux\";import{db}from\"./firebase\";import{useHistory}from\"react-router-dom\";function Chat(_ref){var id=_ref.id,username=_ref.username,timestamp=_ref.timestamp,read=_ref.read,imageUrl=_ref.imageUrl,profilePic=_ref.profilePic;var dispatch=useDispatch();var history=useHistory();var user=useSelector(selectUser);var open=function open(){if(read.indexOf(user.username)===-1){dispatch(selectImage(imageUrl));db.collection(\"posts\").doc(id).update({read:[].concat(_toConsumableArray(read),[user.username])});history.push(\"/chats/view\");}else{dispatch(selectImage(imageUrl));history.push(\"/chats/view\");}};return/*#__PURE__*/_jsxs(\"div\",{onClick:open,className:\"chat\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"chat__avatar\",src:profilePic}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat__info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:username}),/*#__PURE__*/_jsxs(\"p\",{children:[read.indexOf(user.username)===-1&&\"Cliquez pour voir - \",/*#__PURE__*/_jsx(Moment,{interval:1000,fromNow:true,children:new Date(timestamp===null||timestamp===void 0?void 0:timestamp.toDate()).valueOf()})]})]}),read.indexOf(user.username)===-1&&/*#__PURE__*/_jsx(StopRoundedIcon,{className:\"chat__readIcon\"})]});}export default Chat;","map":{"version":3,"sources":["C:/Users/SEBASTIEN/Desktop/Exercices Web/React/Projets/Snapchat/snapchat/src/Chat.js"],"names":["Avatar","React","StopRoundedIcon","Moment","selectImage","selectUser","useDispatch","useSelector","db","useHistory","Chat","id","username","timestamp","read","imageUrl","profilePic","dispatch","history","user","open","indexOf","collection","doc","update","push","Date","toDate","valueOf"],"mappings":"+RAAA,OAASA,MAAT,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,eAAP,KAA4B,gCAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAO,kBAAP,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,qBAAxC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,EAAT,KAAmB,YAAnB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,QAASC,CAAAA,IAAT,MAAuE,IAAvDC,CAAAA,EAAuD,MAAvDA,EAAuD,CAAnDC,QAAmD,MAAnDA,QAAmD,CAAzCC,SAAyC,MAAzCA,SAAyC,CAA9BC,IAA8B,MAA9BA,IAA8B,CAAxBC,QAAwB,MAAxBA,QAAwB,CAAdC,UAAc,MAAdA,UAAc,CACrE,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,CAAAA,OAAO,CAAGT,UAAU,EAA1B,CACA,GAAMU,CAAAA,IAAI,CAAGZ,WAAW,CAACF,UAAD,CAAxB,CAEA,GAAMe,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACjB,GAAIN,IAAI,CAACO,OAAL,CAAaF,IAAI,CAACP,QAAlB,IAAgC,CAAC,CAArC,CAAwC,CACtCK,QAAQ,CAACb,WAAW,CAACW,QAAD,CAAZ,CAAR,CACAP,EAAE,CAACc,UAAH,CAAc,OAAd,EACGC,GADH,CACOZ,EADP,EAEGa,MAFH,CAEU,CACNV,IAAI,8BAAMA,IAAN,GAAYK,IAAI,CAACP,QAAjB,EADE,CAFV,EAKAM,OAAO,CAACO,IAAR,CAAa,aAAb,EACD,CARD,IAQO,CACLR,QAAQ,CAACb,WAAW,CAACW,QAAD,CAAZ,CAAR,CACAG,OAAO,CAACO,IAAR,CAAa,aAAb,EACD,CACF,CAbD,CAeA,mBACE,aAAK,OAAO,CAAEL,IAAd,CAAoB,SAAS,CAAC,MAA9B,wBACE,KAAC,MAAD,EAAQ,SAAS,CAAC,cAAlB,CAAiC,GAAG,CAAEJ,UAAtC,EADF,cAEE,aAAK,SAAS,CAAC,YAAf,wBACE,oBAAKJ,QAAL,EADF,cAEE,qBACGE,IAAI,CAACO,OAAL,CAAaF,IAAI,CAACP,QAAlB,IAAgC,CAAC,CAAjC,EAAsC,sBADzC,cAEE,KAAC,MAAD,EAAQ,QAAQ,CAAE,IAAlB,CAAwB,OAAO,KAA/B,UACG,GAAIc,CAAAA,IAAJ,CAASb,SAAT,SAASA,SAAT,iBAASA,SAAS,CAAEc,MAAX,EAAT,EAA8BC,OAA9B,EADH,EAFF,GAFF,GAFF,CAWGd,IAAI,CAACO,OAAL,CAAaF,IAAI,CAACP,QAAlB,IAAgC,CAAC,CAAjC,eACC,KAAC,eAAD,EAAiB,SAAS,CAAC,gBAA3B,EAZJ,GADF,CAiBD,CAED,cAAeF,CAAAA,IAAf","sourcesContent":["import { Avatar } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport \"./Chat.css\";\r\nimport StopRoundedIcon from \"@material-ui/icons/StopRounded\";\r\nimport Moment from \"react-moment\";\r\nimport \"moment/locale/fr\";\r\nimport { selectImage, selectUser } from \"./features/appSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { db } from \"./firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction Chat({ id, username, timestamp, read, imageUrl, profilePic }) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const user = useSelector(selectUser);\r\n\r\n  const open = () => {\r\n    if (read.indexOf(user.username) === -1) {\r\n      dispatch(selectImage(imageUrl));\r\n      db.collection(\"posts\")\r\n        .doc(id)\r\n        .update({\r\n          read: [...read, user.username],\r\n        });\r\n      history.push(\"/chats/view\");\r\n    } else {\r\n      dispatch(selectImage(imageUrl));\r\n      history.push(\"/chats/view\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div onClick={open} className=\"chat\">\r\n      <Avatar className=\"chat__avatar\" src={profilePic} />\r\n      <div className=\"chat__info\">\r\n        <h4>{username}</h4>\r\n        <p>\r\n          {read.indexOf(user.username) === -1 && \"Cliquez pour voir - \"}\r\n          <Moment interval={1000} fromNow>\r\n            {new Date(timestamp?.toDate()).valueOf()}\r\n          </Moment>\r\n        </p>\r\n      </div>\r\n      {read.indexOf(user.username) === -1 && (\r\n        <StopRoundedIcon className=\"chat__readIcon\" />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"]},"metadata":{},"sourceType":"module"}