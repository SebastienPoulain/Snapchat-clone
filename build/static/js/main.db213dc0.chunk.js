(this.webpackJsonpsnapchat=this.webpackJsonpsnapchat||[]).push([[0],{164:function(e,t,a){},165:function(e,t,a){},169:function(e,t,a){},172:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var c=a(6),n=a(2),s=a.n(n),i=a(63),r=a.n(i),o=(a(164),a(165),a(21)),l=a(135),u=a.n(l),j=a(139),d=a.n(j),m=a(110),b=a.n(m),p=a(85),h=Object(p.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,t){e.cameraImage=t.payload},resetCameraImage:function(e){e.cameraImage=null}}}),O=h.actions,f=O.setCameraImage,x=O.resetCameraImage,g=function(e){return e.camera.cameraImage},v=h.reducer,_=a(19),w=(a(169),{width:250,height:400,facingMode:"user"});var N=function(){var e=Object(n.useRef)(null),t=Object(o.b)(),a=Object(_.f)(),s=Object(n.useCallback)((function(){var c=e.current.getScreenshot();t(f(c)),a.push("/preview")}),[e]);return Object(c.jsxs)("div",{className:"webcamCapture",children:[Object(c.jsx)(u.a,{audio:!1,height:w.height,ref:e,screenshotFormat:"image/jpeg",width:w.width,videoConstraints:w}),Object(c.jsx)(b.a,{fontSize:"large",className:"webcamCapture__back",onClick:function(){a.replace("/")}}),Object(c.jsx)(d.a,{className:"webcamCapture__button",onClick:s,fontSize:"large"})]})},I=a(67),C=(a(172),a(140)),k=a.n(C),S=a(142),y=a.n(S),E=a(141),P=a.n(E),U=a(143),z=a.n(U),R=a(144),D=a.n(R),A=a(145),B=a.n(A),L=a(146),F=a.n(L),T=a(147),V=a.n(T),W=a(148),J=a.n(W),K=a(204),M=a(73),G=M.a.initializeApp({apiKey:"AIzaSyD3ICycjZ_lNX3JXf3TOdZtt1VSCGSNzxA",authDomain:"snapchat-83f2c.firebaseapp.com",projectId:"snapchat-83f2c",storageBucket:"snapchat-83f2c.appspot.com",messagingSenderId:"524917382890",appId:"1:524917382890:web:61b4e5e9328a095ec7c193"}).firestore(),Q=M.a.auth(),X=M.a.storage(),Z=new M.a.auth.GoogleAuthProvider,q=Object(p.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null},selectImage:function(e,t){e.selectedImage=t.payload},resetImage:function(e){e.selectedImage=null}}}),H=q.actions,Y=H.login,$=H.logout,ee=H.selectImage,te=(H.resetImage,function(e){return e.app.user}),ae=function(e){return e.app.selectedImage},ce=q.reducer;var ne=function(){var e=Object(o.c)(g),t=Object(_.f)(),a=Object(o.b)(),s=Object(o.c)(te);return Object(n.useEffect)((function(){e||t.replace("/capture")}),[e,t]),Object(c.jsxs)("div",{className:"preview",children:[Object(c.jsx)(k.a,{className:"preview__close",onClick:function(){a(x())}}),Object(c.jsxs)("div",{className:"preview__toolbarRight",children:[Object(c.jsx)(P.a,{}),Object(c.jsx)(y.a,{}),Object(c.jsx)(z.a,{}),Object(c.jsx)(D.a,{}),Object(c.jsx)(B.a,{}),Object(c.jsx)(F.a,{}),Object(c.jsx)(V.a,{})]}),Object(c.jsx)("img",{src:e,alt:""}),Object(c.jsxs)("div",{onClick:function(){var a=Object(K.a)();X.ref("posts/".concat(a)).putString(e,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){X.ref("posts").child(a).getDownloadURL().then((function(e){G.collection("posts").add({imageUrl:e,username:s.username,read:[],profilePic:s.profilePic,timestamp:M.a.firestore.FieldValue.serverTimestamp()}),t.replace("/")}))}))},className:"preview__footer",children:[Object(c.jsx)("h2",{children:"Envoyer"}),Object(c.jsx)(J.a,{className:"preview__sendIcon"})]})]})},se=a(118),ie=a(205),re=(a(175),a(152)),oe=a.n(re),le=a(153),ue=a.n(le),je=a(156),de=(a(176),a(150)),me=a.n(de),be=a(149),pe=a.n(be);a(178);var he=function(e){var t=e.id,a=e.username,n=e.timestamp,s=e.read,i=e.imageUrl,r=e.profilePic,l=Object(o.b)(),u=Object(_.f)(),j=Object(o.c)(te);return Object(c.jsxs)("div",{onClick:function(){-1===s.indexOf(j.username)?(l(ee(i)),G.collection("posts").doc(t).update({read:[].concat(Object(je.a)(s),[j.username])}),u.push("/chats/view")):(l(ee(i)),u.push("/chats/view"))},className:"chat",children:[Object(c.jsx)(ie.a,{className:"chat__avatar",src:r}),Object(c.jsxs)("div",{className:"chat__info",children:[Object(c.jsx)("h4",{children:a}),Object(c.jsxs)("p",{children:[-1===s.indexOf(j.username)&&"Cliquez pour voir - ",Object(c.jsx)(pe.a,{interval:1e3,fromNow:!0,children:new Date(null===n||void 0===n?void 0:n.toDate()).valueOf()})]})]}),-1===s.indexOf(j.username)&&Object(c.jsx)(me.a,{className:"chat__readIcon"})]})},Oe=a(154),fe=a.n(Oe),xe=a(120),ge=a(151);a(183),a(129);var ve=function(){var e=Object(n.useState)("none"),t=Object(se.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)([]),r=Object(se.a)(i,2),l=r[0],u=r[1],j=Object(n.useState)(""),d=Object(se.a)(j,2),m=d[0],b=d[1],p=Object(o.c)(te),h=Object(o.b)(),O=Object(_.f)();Object(n.useEffect)((function(){f()}),[]);var f=function(){G.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return u(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})),b("")};return Object(c.jsxs)("div",{className:"chats",children:[Object(c.jsxs)("div",{className:"chats__header",children:[Object(c.jsx)(ie.a,{src:p.profilePic,onClick:function(){Q.signOut()},className:"chats__avatar"}),Object(c.jsxs)("div",{className:"chats__search",children:[Object(c.jsx)(oe.a,{onClick:f,className:"chats__searchIcon"}),Object(c.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=m.charAt(0).toUpperCase()+m.slice(1);""!==m&&new xe.FireSQL(ge.a.firestore()).rxQuery("\n  SELECT *\n  FROM posts\n  WHERE username LIKE '".concat(m,"%' or username LIKE '").concat(t,"%'\n  ORDER BY username, timestamp DESC\n"),{includeId:"id"}).subscribe((function(e){0!==e.size&&u(e.map((function(e){return{id:e.id,data:{username:e.username,imageUrl:e.imageUrl,profilePic:e.profilePic,read:e.read,timestamp:e.timestamp}}})))}));s("block")},children:Object(c.jsx)("input",{placeholder:"Utilisateur \xe0 rechercher",onChange:function(e){return b(e.target.value)},value:m,type:"text"})})]}),Object(c.jsx)(ue.a,{className:"chats__chatIcon"})]}),Object(c.jsx)("div",{className:"chats__posts",children:l.length>0?l.map((function(e){var t=e.id,a=e.data,n=a.profilePic,s=a.username,i=a.timestamp,r=a.imageUrl,o=a.read;return Object(c.jsx)(he,{profilePic:n,username:s,timestamp:i,imageUrl:r,read:o,id:t},t)})):Object(c.jsx)("h4",{style:{display:"".concat(a)},children:"l'utilisateur entr\xe9 n'existe pas"})}),Object(c.jsx)(fe.a,{className:"chats__takePicIcon",onClick:function(){h(x()),O.push("/capture")},fontSize:"large"})]})},_e=(a(185),a(155));var we=function(){var e=Object(o.c)(ae),t=Object(_.f)();Object(n.useEffect)((function(){e||a()}),[e]);var a=function(){t.replace("/")};return Object(c.jsxs)("div",{className:"chatView",children:[Object(c.jsx)("img",{src:e,alt:""}),Object(c.jsx)(b.a,{fontSize:"large",className:"chatView__back",onClick:a}),Object(c.jsx)("div",{className:"chatView__timer",children:Object(c.jsx)(_e.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004777",.33],["#F7B801",.33],["#A30000",.33]],children:function(e){var t=e.remainingTime;return 0===t&&a(),t}})})]})},Ne=a(203);a(186);var Ie=function(){var e=Object(o.b)();return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login__container",children:[Object(c.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(c.jsx)(Ne.a,{variant:"outlined",onClick:function(){Q.signInWithPopup(Z).then((function(t){e(Y({username:t.user.displayName,profilePic:t.user.photoURL,id:t.user.uid}))})).catch((function(e){return alert(e.message)}))},children:"Se connecter"})]})})};var Ce=function(){var e=Object(o.c)(te),t=Object(o.b)();return Object(n.useEffect)((function(){Q.onAuthStateChanged((function(e){t(e?Y({username:e.displayName,profilePic:e.photoURL,id:e.uid}):$())}))}),[]),Object(c.jsx)("div",{className:"app",children:Object(c.jsx)(I.a,{children:e?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:"https://lakeridgenewsonline.com/wp-content/uploads/2020/04/snapchat.jpg",alt:"",className:"app__logo"}),Object(c.jsx)("div",{className:"app__body",children:Object(c.jsx)("div",{className:"app__bodyBackground",children:Object(c.jsxs)(_.c,{children:[Object(c.jsx)(_.a,{exact:!0,path:"/preview",children:Object(c.jsx)(ne,{})}),Object(c.jsx)(_.a,{exact:!0,path:"/chats/view",children:Object(c.jsx)(we,{})}),Object(c.jsx)(_.a,{exact:!0,path:"/",children:Object(c.jsx)(ve,{})}),Object(c.jsx)(_.a,{exact:!0,path:"/capture",children:Object(c.jsx)(N,{})})]})})})]}):Object(c.jsx)(Ie,{})})})},ke=Object(p.a)({reducer:{app:ce,camera:v}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(o.a,{store:ke,children:Object(c.jsx)(Ce,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[187,1,2]]]);
//# sourceMappingURL=main.db213dc0.chunk.js.map